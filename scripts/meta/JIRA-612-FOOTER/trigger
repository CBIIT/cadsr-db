set serveroutput on size 1000000
SPOOL FORMBUILD-612.log  

CREATE OR REPLACE TRIGGER  SBREXT.MDSR_BIROW_QC_FOOTER_TR
BEFORE INSERT ON SBREXT.QUEST_CONTENTS_EXT
FOR EACH ROW
WHEN NEW.QTL_NAME='FOOTER'
DECLARE 
   cnt NUMBER(3);
BEGIN
SELECT COUNT (*)
INTO   ctn
FROM   SBREXT.QUEST_CONTENTS_EXT
WHERE QTL_NAME='FOOTER' 
AND DN_CRF_IDSEC=:NEW.DN_CRF_IDSEC;

IF ctn > 0 THEN
   RAISE_APPLICATION_ERROR ( -20002, 
    'DUPLICATE FOOTER' );
END IF;
END;

SPOOL OFF
